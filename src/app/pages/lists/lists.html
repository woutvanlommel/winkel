<div class="lists-container">
  <div class="lists-header">
    <h1>Winkellijsten</h1>
    <p>Beheer je boodschappen</p>
  </div>

  @if (showAddList) {
    <div class="add-list-section">
      <form (ngSubmit)="createList()" class="add-list-form">
        <input
          type="text"
          [(ngModel)]="newListName"
          name="listName"
          placeholder="Naam van de lijst..."
          class="add-list-input"
          required
        />
        <button type="submit" class="add-list-button">
          Aanmaken
        </button>
      </form>
    </div>
  }

  @if (error) {
    <div style="background: #fef2f2; color: #991b1b; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem; border: 1px solid #fecaca;">
      <p style="margin: 0; font-weight: 500;">{{ error }}</p>
    </div>
  }

  @if (!loading && !error) {
    <div class="lists-grid">
      @for (list of lists; track list.id) {
        <div class="list-card">
          <div class="list-card-header">
            <div>
              <h3>{{ list.winkelwagen }}</h3>
              <div class="list-card-date">{{ list.winkelwagen }}</div>
            </div>
            <button
              (click)="deleteList(list); $event.stopPropagation()"
              class="delete-button"
              title="Verwijder lijst"
            >
              <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
              </svg>
            </button>
          </div>

          @if (list.showAddProduct) {
            <div class="add-product-section">
              <form (ngSubmit)="addProduct(list)" class="add-product-form">
                <input
                  type="text"
                  [(ngModel)]="list.newProductName"
                  name="productName"
                  placeholder="Product naam..."
                  class="add-product-input"
                  required
                />
                <button type="submit" class="add-product-button">
                  Toevoegen
                </button>
              </form>
            </div>
          }
          
          <a [routerLink]="['/lijst', list.id]" class="view-list-link">
            Bekijk lijst â†’
          </a>
        </div>
      }

      @if (lists.length === 0) {
        <div class="empty-state">
          <div class="empty-state-icon">ğŸ“</div>
          <h2>Geen lijsten</h2>
          <p>Maak je eerste winkellijst aan!</p>
        </div>
      }
    </div>
  }
</div>
